var currentlyAdding=!1,masterID="",lang=getCookie("lang");function handleAnimation(t){$("#sticky_left_arrow, #sticky_right_arrow").toggleClass("hidden")}function combineDSCtext(){if(""!=currentDough){if(""==currentSauce)var t="";else t=", ";if(""==currentCheese)var e="";else e=", ";return currentDough+t+currentSauce+e+currentCheese}return'<p class="text-danger left">'+chooseDoughText+",&nbsp;</p>"+currentSauce+", "+currentCheese}function toggleDough(t){if(null!=t&&!t.hasClass("inactive")||null==t){var e;switch(parseInt($(".pieces.active").data("pieces"))){case 4:e=p4;break;case 6:e=p6;break;case 8:e=p8;break;case 10:e=p10;break;case 12:e=p12;break;case 24:e=p24}var a=$("input[name=dough_type]:checked").val(),i=$.inArray(Number(a),e);$("INPUT[name=dough_type]").attr("disabled",!1),$("INPUT[name=dough_type]").attr("checked",!1),$(".dough").addClass("disable"),$("#doughs .dough_label").addClass("inactive"),$.each(e,function(t,e){$("label[for='dough_"+e+"']").removeClass("inactive"),$("#dough_"+e).removeClass("disable"),$("#dough_"+e).attr("disabled",!1);$(".doughslist").popover({animation:"true",delay:100,placement:"right",trigger:"hover focus",html:"true",container:".modal_pizza_product",content:"Το συγκεκριμένο μέγεθος πίτσας δεν διατίθεται με τη ζύμη που επιλέξατε. Παρακαλώ επιλέξτε μια απο τις διαθέσιμες ζύμες."}),Number(i)>=0?$(".doughslist").popover("destroy"):$(".doughslist").popover("show"),parseInt(a)==parseInt(e)&&$("#dough_"+e).prop("checked",!0)}),$(".noInactive").removeClass("inactive"),updatePrice()}}function customRadio(t){var e=$('input[name="'+t+'"]');$(e).each(function(){$(this).wrap("<span class='custom-radio'></span>"),$(this).is(":checked")&&$(this).parent().addClass("selected")}),$(e).click(function(){$(this).is(":checked")&&$(this).parent().addClass("selected"),$(e).not(this).each(function(){$(this).parent().removeClass("selected")})})}function addSlaves(t){t.master_id=masterID,-1==window.location.href.indexOf("fullcart")&&-1==window.location.href.indexOf("menu/product")||(t.callback=function(){location.reload()}),addToCart(t)}function addToCart(t){if(null!=t.product_id||0!=t.product_id)var e=t.product_id;if(void 0!==t.product_count&&!1!==t.product_count){if(!(t.product_count>0))return;var a=t.product_count}var i="0";if(null==t.product_status&&0==t.product_status||(i=t.product_status),null!=t.button||0!=t.button)var r=t.button;if(null!=t.product_materials||0!=t.product_materials)var s=t.product_materials;if(null!=t.delivery_price||0!=t.delivery_price)var n=t.delivery_price;if(null!=t.takeaway_price||0!=t.takeaway_price)var o=t.takeaway_price;if(null!=t.product_name||0!=t.product_name)var c=t.product_name;if(null!=t.product_image||0!=t.product_image)var l=t.product_image;if(null!=t.animation_target||0!=t.animation_target)var d=t.animation_target;if(null!=t.callback||0!=t.callback)var u=t.callback;if(null!=t.animate||0!=t.animate)var p=t.animate;if(null!=t.coupon||0!=t.coupon)var _=t.coupon;if(null!=t.uq_code||0!=t.uq_code)var f=t.uq_code;if(null!=t.size_id||0!=t.size_id)var m=t.size_id;if(null!=t.gift||0!=t.gift)var h=t.gift;if(null!=t.slaves||0!=t.slaves)var v=t.slaves;if(null!=t.master_id||0!=t.master_id)var g=t.master_id;if(null!=t.crm_policy||0!=t.crm_policy)var b=t.crm_policy;if(null!=t.is_offering||0!=t.is_offering)var y=t.is_offering;if(null!=t.material||0!=t.material)var C=t.material;var x="master";if(null==t.role&&0==t.role||(x=t.role),null!=t.smartbox_id)var k=t.smartbox_id;if(null!=t.smartbox_title)var z=t.smartbox_title;if(null!=t.is_recommended)var w=t.is_recommended;currentlyAdding=!0;var S=!0;0==p&&(S=!1),1==S&&(null!=d&&null!=d||(d=$("#item_img_"+e))),null!=a&&null!=a||(a=1),null!=i&&null!=i||(i=0);var D=$("#productAddToCartBtn");if(null!=r){if("el"===lang)var A="Προστέθηκε";else A="Added";var I="";I=r.html(),r.addClass("has-spinner"),r==D?(r.addClass("active"),r.html('<img class="pf__add-to-cart-hover-img mr-3" src="/assets/site/images/add_to_cart_success.png" alt="Add to cart success" title="Add to cart pizza">'+A)):r.html('<span class="spinner" style="display:block;"><i class="fa fa-refresh fa-spin"></i></span>')}var P={1:"Starters",2:"Salads",3:"Pizzas",4:"Calzone",7:"Extras",8:"Extras",9:"Pasta",11:"Junior",12:"Drinks",13:"Drinks",15:"Extras",17:"Sandwiches",20:"Desserts",22:"Desserts",23:"Sandwiches",25:"Pizzas",26:"Extras",27:"Pizzas",32:"Vegan",34:"Sandwiches",35:"Pizzas",37:"Drinks",38:"Sandwiches",39:"Pasta",40:"Salads",41:"Lunchoffers",42:"Smartbox",55:"Invisible",56:"Smartbox",57:"Smartbox",58:"Smartbox",59:"Pizzas",61:"Burgers",62:"Drinks"},T={product_id:e,product_count:a,product_status:i,product_materials:s,delivery_price:n,takeaway_price:o,product_image:l,product_name:c,smartbox_id:k,smartbox_title:z};function O(t,e,a,i,r,s){(window.dataLayer=window.dataLayer||[]).push({event:e,product_id:a,category:i,product_value:r.toFixed(2),ecommerce:{items:[{item_name:t,item_id:a,price:r.toFixed(2),item_category:i,quantity:"1"}]}});let n=siteUrl+"/menu/product/"+s+"-8",o="https://images.pizzafan.gr/mobile/products/"+a+".png";mootrack("trackAddToOrder",a,r.toFixed(2),n,1,r.toFixed(2),t,o)}null!=_&&(T.product_coupon=_),null!=f&&(T.uq_code=f),null!=h&&(T.product_gift=h),null!=x&&(T.product_role=x),null!=v&&(T.slaves=v),null!=g&&(T.master_id=g),null!=b&&(T.crm_policy=b),null!=y&&(T.is_offering=y),null!=m&&(T.size_id=m),null!=C&&(T.product_materials=C),null!=k&&(T.smartbox_id=k),null!=z&&(T.smartbox_title=z),null!=w&&(T.is_recommended=w),$('.pf__add-to-cart[data-id != "'+T.product_id+'"]').addClass("inactive");let F=$('.pf__add-to-cart[data-id="'+T.product_id+'"]');return F.addClass("active"),F.html('<img class="pf__add-to-cart-hover-img mr-3" src="/assets/site/images/add_to_cart_success.png" alt="Add to cart success" title="Add to cart pizza">'+A),$.ajax({type:"POST",cache:!1,async:!0,url:siteUrl+"/cart/add",data:T,success:function(a){var i=JSON.parse(a);if("OK"==i.status){if(null==n&&""==(n=$("#item_"+e+" .delivery").text())&&setTimeout(function(){n=$("[data-id="+e+"] .price .font18").eq(0).text()},2e3),"favorites"==page&&(category=P[t.product_materials.type_id]),null==category&&(category="Offers"),"slave"==x)for(let t=0,e=v.length;t<e;t++)O(c,"add_to_cart",v[t].product_id,category,parseFloat(v[t].delivery_price),i.product_slug);else""==n?setTimeout(function(){O(c,"add_to_cart",e,category,parseFloat(n),i.product_slug)},2e3):O(c,"add_to_cart",e,category,parseFloat(n),i.product_slug);masterID=i.temp_id;var s=null;if(1==S&&(isMobile?s=$("#shoppingMobile"):(s=$(".card"),$(document).scrollTop()>80&&(s=$(".card.stickyCart")))),null==d||""==d||null==d.offset()||null==s.offset()&&null==s.offset())null!=r&&((r=D)&&r.remove(),r.removeClass("disabled"),r.removeClass("has-spinner"),r.html(I)),window.updateCartIcon(i.totalInCart,i.totalPrice),$.fancybox.isOpen&&$.fancybox.close(),null==u&&null==u||u(!0);else{if(1!=S)return null!=r&&((r=D)&&r.remove(),r.removeClass("disabled"),r.removeClass("has-spinner"),r.html(I)),window.updateCartIcon(i.totalInCart,i.totalPrice),$.fancybox.isOpen&&$.fancybox.close(),null==u&&null==u||u(!0),currentlyAdding=!1,!0;var o=d.clone();o.children(".toppings_layer").remove(),o.offset({top:d.offset().top,left:d.offset().left}).css({opacity:"0.9",position:"absolute",width:"150px","z-index":"9999",background:"none"}).appendTo($("body")).animate({top:s.offset().top,left:s.offset().left+30,width:150},1e3,"easeInOutExpo"),o.animate({width:0,height:0},function(){null!=r&&((r=D)&&r.remove(),r.removeClass("disabled"),r.removeClass("has-spinner"),r.html(I)),window.updateCartIcon(i.totalInCart,i.totalPrice),$.fancybox.isOpen&&$.fancybox.close(),null==u&&null==u||u(!0),o.remove()})}return currentlyAdding=!1,!0}return currentlyAdding=!1,!1},error:function(t){console.log(t)},complete:function(){$(".pf__add-to-cart").removeClass("inactive"),F.removeClass("active inactive"),F.html('<img class="pf__add-to-cart-img mr-2" src="/assets/site/images/shopping_cart_hover@2x.png" alt="Add to cart pizza" title="Add to cart pizza">'+changeLangWordings("Add to cart","Στο καλάθι"))}}),currentlyAdding=!1,!1}function addToFavorites(t,e,a,i,r,s,n){var o;null==r||""==r?o={product_id:t,custom:a,custom_title:i}:"history"==r?o=null!=s&&""!=s?{product_id:t,custom:a,origin:r,custom_title:i,materials:s}:{product_id:t,custom:a,origin:r,custom_title:i}:"custom_pizza"==r&&(o={product_id:t,custom:a,origin:r,materials:s,custom_title:i,imageFileName:n}),$.ajax({type:"POST",cache:!1,url:URLfavorites,data:o,success:function(t){"OK"==JSON.parse(t).status&&(e.removeClass("favoriteStarBtn"),e.unbind(),e.addClass("favorited"),e.addClass("disabled"))}})}function addToFavoritesCustomized(t,e,a){var i=JSON.parse(t),r={product_id:i.product_id,materials:i.materials,price:"",quantity:1,size_id:i.size_id,type_id:i.type_id};t={product_node:JSON.stringify(r),custom_name:e},$.ajax({type:"POST",cache:!1,url:URLfavoritesCustom,data:t,success:function(t){"OK"==JSON.parse(t).status&&($(".pf__hero-col").append('<p class="text-danger added-successfully">Προστέθηκε στα αγαπημένα επιτυχώς!</p>'),setTimeout(function(){$(".added-successfully").fadeOut("slow")},1e3),a.animate({width:"40px"},500,function(){a.animate({width:"36px"}),a.removeClass("favoriteStarBtn2"),a.unbind(),a.attr("src","/assets/site/images/pf__favored.png"),a.addClass("favorited"),a.addClass("disabled"),a.css("cursor","not-allowed")}))}})}function getCookie(t){for(var e=t+"=",a=decodeURIComponent(document.cookie).split(";"),i=0;i<a.length;i++){for(var r=a[i];" "==r.charAt(0);)r=r.substring(1);if(0==r.indexOf(e))return r.substring(e.length,r.length)}return""}$(document).ready(function(){$("#accordion .panel-collapse.in").prev().addClass("active"),$("#accordion").on("show.bs.collapse",function(t){$("#accordion .panel-heading.active .accordion-toggle").find("img").attr("src","/assets/site/images/more_details.png"),$("#accordion .panel-heading.active").removeClass("active"),$(t.target).prev().addClass("active")}),$(".addToCartInc .numbers-row .dec").on("click tap",function(t){t.preventDefault();var e=parseInt($(this).siblings("#num-hens").val());if(e>1)var a=e-1;else a=1;var i=a*$("#add_cart_price").attr("data-price"),r=a*parseFloat($(this).parent().data("price")),s=a*$("#add_cart_price_take").attr("data-price-take");$("#add_cart_price SPAN").html(i.toFixed(2)),$("#add_cart_price_take SPAN").html(s.toFixed(2)),$(this).siblings("#num-hens").val(a),$(this).parent().parent().parent().parent().find(".price SPAN").html(r.toFixed(2))}),$(".addToCartInc .numbers-row .inc").on("click tap",function(t){t.preventDefault();var e=parseInt($(this).siblings("#num-hens").val())+1,a=$("#add_cart_price").attr("data-price"),i=$("#add_cart_price_take").attr("data-price-take"),r=e*a,s=e*parseFloat($(this).parent().data("price")),n=e*i;$("#add_cart_price SPAN").html(r.toFixed(2)),$("#add_cart_price_take SPAN").html(n.toFixed(2)),$(this).siblings("#num-hens").val(e),$(this).parent().parent().parent().parent().find(".price SPAN").html(s.toFixed(2))}),$(".pizza_size li").on("click tap",function(t){t.preventDefault(),$(this).siblings().removeClass("active"),$(this).addClass("active"),toggleDough()}),$(".size-panel .pizza_size_small .pf__product-box-pieces-tag").on("click tap",function(t){t.preventDefault(),$(this).siblings().removeClass("active"),$(this).siblings().addClass("deactive"),$(this).removeClass("deactive"),$(this).addClass("active"),$(".size-panel .piece").text($(this).find(".num").text()+" "+$(this).find(".name").text()+" - "+$(this).find(".type").text())}),$(".ingredient .builder a.btn").on("click tap",function(t){t.preventDefault(),$(this).siblings().removeClass("active"),$(this).toggleClass("active")}),$(".remove").on("click tap",function(t){t.preventDefault(),$(this).parent("div").fadeOut(300,function(){$(this).remove()})}),$(".double").on("click tap",function(t){t.preventDefault(),$(this).hasClass("inactive")||($(this).toggleClass("deactivate"),$(this).toggleClass("activate"))}),customRadio("pizza_type"),$(".dsc-panel input.dough").each(function(){$(this).on("click tap",function(){currentDough=$(this).parent().find(".checkbox_title").text(),$(".pf__custom-pizza-description").text(combineDSCtext())})}),$(".dsc-panel input.sauce").each(function(){$(this).on("click tap",function(){currentSauce=$(this).parent().find(".checkbox_title").text(),$(".pf__custom-pizza-description").text(combineDSCtext())})}),$(".dsc-panel input.cheese").each(function(){$(this).on("click tap",function(){currentCheese=$(this).parent().find(".checkbox_title").text(),$(".pf__custom-pizza-description").text(combineDSCtext())})}),$("#sticky_left_arrow, #sticky_right_arrow").on("click tap",function(t){t.preventDefault();var e="sticky_right_arrow"==this.id?"+=":"-=";$(".product_categories_container").stop().animate({scrollLeft:e+"800"},400,handleAnimation(this.id))}),"undefined"!=typeof pastaMaterialIds&&pastaMaterialIds.forEach(t=>{$("#topping_"+t).find("#single span").css("pointer-events","none"),$("#topping_"+t).on("click tap",function(e){let a=$('#pastaTypeChoices [id^="topping_"].hasTopping').find(".pf__single").data("id");var i=[];i=pastaMaterialIds.filter(function(e,a,i){return e!=t});if(console.log("newPastaList",i),i.forEach(function(t){removeTopping(t)}),void 0===a){console.log("to do select topping");let e=$("#topping_"+t).find(".materialSwitcher a.btn");selectTopping(e.attr("data-side"),e.attr("data-material-id"),e.attr("data-material-layer-id"),1),$("#topping_"+t).find("#single").addClass("activate")}})})}),$(function(){$('[data-toggle="tooltip"]').tooltip()});